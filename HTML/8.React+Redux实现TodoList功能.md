这应该算是我对React+Redux组合的一个简单应用并加上自己的理解
### 1.TodoList.js

```
import React,{Component} from 'react'
import {Input ,List,Button} from 'antd'
import store from './store'

class TodoList extends Component{

    // 构造
      constructor(props) {
        super(props);
        this.state = store.getState();
        this.handleInputValueChange = this.handleInputValueChange.bind(this);
        this.handleSubmitBtnClick = this.handleSubmitBtnClick.bind(this);
        this.handleDeleteBtnClick = this.handleDeleteBtnClick.bind(this);
        this.handleStoreValueChange = this.handleStoreValueChange.bind(this);
        store.subscribe(this.handleStoreValueChange)
      }

    render(){
        return(
            <div>
                <div>
                    <Input style={{width:"200px",height:"50px"}} placeholder = "请输入文本..." value={this.state.inputValue} onChange={this.handleInputValueChange}/>
                    <Button type="primary" onClick={this.handleSubmitBtnClick} style={{width:"50px",height:"50px"}}>提交</Button>
                </div>
                <div>
                    <List dataSource={this.state.list} renderItem={(item,index) => <List.Item onClick ={(event) =>{this.handleDeleteBtnClick(index)}}>{item}</List.Item>}/>
                </div>

            </div>
        )
    }

    handleInputValueChange(e){
        // this.setState({
        //     inputValue:e.target.value
        // })
        const action = {
            type:'handle_input_value',
            inputValue:e.target.value
        };
        store.dispatch(action);
    }
    handleSubmitBtnClick(){
        // this.setState({
        //     listData:[...this.state.list,this.state.inputValue],
        //     inputValue:""
        // })
        const action = {
            type:'handle_submit_value',
        }
        store.dispatch(action);
    }
    handleDeleteBtnClick(index){
        // let temparray = this.state.list;
        // temparray.splice(index,1);
        // this.setState({
        //     listData:temparray
        // })
        const action = {
            type:'handle_delete_value',
            index
        }
        store.dispatch(action)
    }
    handleStoreValueChange(){
        this.setState(store.getState());
    }
         
}
export default TodoList;
```
在TodoList中所要做的最重要的是在constru中初始化绑定一些方法与store

```
    this.state = store.getState();
    this.handleInputValueChange = this.handleInputValueChange.bind(this);
    this.handleSubmitBtnClick = this.handleSubmitBtnClick.bind(this);
    this.handleDeleteBtnClick = this.handleDeleteBtnClick.bind(this);
    this.handleStoreValueChange = this.handleStoreValueChange.bind(this);
    store.subscribe(this.handleStoreValueChange)
```
在这个地方就是因为没有绑定handleStoreValueChange这个方法而导致报react报错 TypeError: Cannot read property 'setState' of undefined这样的错误
其次所需要注意的是在这个TodoList中各种方法的点击其实就是创建各个action并把各个action转发到store中去

```
    const action = {
            type:'handle_input_value',
            inputValue:e.target.value
        };
        store.dispatch(action);
```

### 2.store的创立
store的创建主要是要建立一个index.js文件
如下所示

```
    import {createStore} from "redux";
import reducer from './reducer'

/* eslint-disable no-underscore-dangle */
  const store = createStore(
   reducer, /* preloadedState, */
   window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
  );
/* eslint-enable */

export default store;
```

### 3.reducer
这个reducer是数据的真实处理部分，不过需要根据action中的类型来判断到底要做什么操作

```
    
const defaultState = {
    inputValue:'',
    list:[1,2,3]
}

export default (state = defaultState,action) =>{
    if (action.type === 'handle_input_value') {
        console.log("fdafdaf---")
        const newState = JSON.parse(JSON.stringify(state));
        console.log(newState)
        newState.inputValue = action.inputValue;
        return newState;
    }
    if (action.type === 'handle_submit_value') {
        const newState = JSON.parse(JSON.stringify(state));
        newState.list.push(newState.inputValue);
        newState.inputValue = '';
        return newState;
    }
    if (action.type === 'handle_delete_value') {
        const newState = JSON.parse(JSON.stringify(state));
        newState.list.splice(newState.index,1);
        return newState;
    }
    return state;
}
```
而且在这个部分中不能去改变原有的state的值，假如说在reducer中改变




