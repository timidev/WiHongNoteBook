### 1.背景
我在项目中使用的这个需求是文章表tb_article的article_category外键到tb_category表的主键去,我在表中只要通过这个外键就能去获取tb_category实体，我的使用方法如下
### 2.mapper的配置

```
<resultMap id="BaseResultMap" type="com.gz.tzreport.pojo.TbArticle">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="article_id" jdbcType="INTEGER" property="articleId" />
    <result column="article_title" jdbcType="VARCHAR" property="articleTitle" />
    <result column="article_link" jdbcType="VARCHAR" property="articleLink" />
    <result column="article_platform" jdbcType="INTEGER" property="articlePlatform"/>
    <result column="article_descript" jdbcType="VARCHAR" property="articleDescript" />
    <result column="article_body" jdbcType="VARCHAR" property="articleBody" />
    <result column="article_image" jdbcType="VARCHAR" property="articleImage" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    
    <association property="articleCategory" javaType="com.gz.tzreport.pojo.TbCategory" typeHandler="com.gz.tzreport.handlers.CategoryTypeHandler">

      <result property="categoryName" column="category_name"/>

      <result property="categoryImage" column="category_image"/>

    </association>

    <association property="articlePlatform" javaType="com.gz.tzreport.pojo.TbPlatform">

      <result property="platformName" column="platform_name"/>
    </association>

  </resultMap>

  <select id="selectIndexArticle" resultMap="BaseResultMap">
    select ta.article_id, ta.article_title, ta.article_link,ta.article_descript, ta.article_body, ta.article_image, tc.category_name,tc.category_image, tp.platform_name
    from tb_article ta,tb_category tc,tb_platform tp
    where ta.article_platform = tp.platform_id
    and ta.article_category = tc.category_id
  </select>
```
### 3.typehandler配置

```
package com.gz.tzreport.handlers;

import com.gz.tzreport.pojo.TbCategory;
import org.apache.ibatis.type.*;

import java.sql.CallableStatement;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

@MappedJdbcTypes(JdbcType.INTEGER)
@MappedTypes(TbCategory.class)
public class CategoryTypeHandler extends BaseTypeHandler<TbCategory> {

    @Override
    public void setNonNullParameter(PreparedStatement ps, int i, TbCategory parameter, JdbcType jdbcType) throws SQLException {
        ps.setInt(i,parameter.getCategoryId());
    }

    @Override
    public TbCategory getNullableResult(ResultSet rs, String columnName) throws SQLException {
        System.out.println("aaaaa---"+rs.getString(columnName));
        return new TbCategory(rs.getString(columnName));
    }

    @Override
    public TbCategory getNullableResult(ResultSet rs, int columnIndex) throws SQLException {
        System.out.println("bbbbb---"+rs.getString(columnIndex));

        return new TbCategory(rs.getString(columnIndex));
    }

    @Override
    public TbCategory getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {
        System.out.println("ccccc---"+cs);

        return new TbCategory(cs.getString(columnIndex));
    }
}

```
这个地方让我很疑惑的是aaaaa那个地方能打印出十次,因为我那张表刚好是十个字段但是每次打印出来的都是category_name字段,我想打印其他字段category_image字段都不行，也就是在association那里你配置了三个字段但是获取的都是第一个而且是谁排第一就是取谁的值，我觉得这个地方肯定是有问题的但是至于具体怎么解决还得再看看留作一个未解决的问题吧

